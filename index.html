<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>عقد تمويل عقاري</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Tajawal', sans-serif;
      background-color: #f5f7fa;
      height: 100%;
      color: #222;
    }
    .page {
      display: none;
      min-height: 100vh;
      padding: 30px 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .show {
      display: flex !important;
    }
    h1 {
      font-size: 28px;
      color: #004d40;
      margin-bottom: 20px;
    }
    h2 {
      font-size: 22px;
      color: #00a98f;
      margin-top: 0;
    }
    .btn {
      background-color: #00a98f;
      color: #fff;
      border: none;
      padding: 12px 30px;
      font-size: 18px;
      border-radius: 8px;
      margin-top: 20px;
      cursor: pointer;
    }
    input {
      width: 100%;
      padding: 12px;
      font-size: 18px;
      margin-top: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .contract {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #ccc;
      max-width: 100%;
      font-size: 16px;
      line-height: 2;
      text-align: right;
      white-space: pre-line;
    }
    .success, .reject {
      font-size: 20px;
      margin-top: 20px;
    }
    .success { color: green; }
    .reject { color: red; }
    footer {
      font-size: 14px;
      color: #555;
      text-align: center;
      padding: 20px;
    }
  </style>
</head>
<body>

<div class="page show" id="page1">
  <h1>سرعة تملك العقار والحلول التمويلية المتكاملة</h1>
  <h2>نرحب بك عميلنا العزيز</h2>
  <p>نبرم معك هذا العقد</p>
  <p style="font-size: 20px; color: #004d40;">ابدأ بسم الله</p>
  <button class="btn" onclick="goToPage(2)">التالي</button>
</div>

<div class="page" id="page2">
  <h2>فضلاً أدخل بياناتك</h2>
  <input type="text" id="fullName" placeholder="الاسم الكريم">
  <input type="text" id="nationalId" placeholder="السجل المدني">
  <button class="btn" onclick="goToPage(3)">التالي</button>
</div>

<div class="page" id="page3">
  <div class="contract" id="contractContent"></div>
  <button class="btn" onclick="goToPage(4)">تمت الموافقة من الطرف الأول</button>
</div>

<div class="page" id="page4">
  <h2>هل توافق على العقد؟</h2>
  <button class="btn" onclick="goToPage(5)">أوافق</button>
  <button class="btn" onclick="goToPage('reject')">لا أوافق</button>
</div>

<div class="page" id="page5">
  <h2>لتأكيد العقد</h2>
  <input type="text" id="confirmId" placeholder="رقم الهوية">
  <input type="text" id="confirmWord" placeholder='اكتب كلمة "موافق"'>
  <button class="btn" onclick="verifyAndFinish()">تأكيد</button>
</div>

<div class="page" id="successPage">
  <div class="success">✅ تم إبرام العقد بنجاح</div>
</div>

<div class="page" id="reject">
  <div class="reject">❌ تم رفض العقد، تواصل مع الممثل القانوني وشكرًا لك.</div>
</div>

<footer id="footerDate"></footer>

<script>
function goToPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('show'));
  document.getElementById("page" + id)?.classList.add('show');
  if (id === 3) generateContract();
}

function generateContract() {
  const name = document.getElementById('fullName').value || '________';
  const now = new Date();
  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
  const arabicDate = now.toLocaleDateString('ar-EG', options);
  const time = now.toLocaleTimeString('ar-EG');

  const text = `
بسم الله الرحمن الرحيم

المملكة العربية السعودية
الوساطة العقارية والتسويق
ترخيص: 1100042624
الرياض

عقد اتفاقية إنهاء إجراءات تمويل عقاري من جهة تمويلية

تم بعون الله وتوفيقه في يوم ${arabicDate}، الساعة ${time}، الاتفاق بين كلٍ من:

الطرف الأول:
شركة الوساطة العقارية والتسويق، ويمثلها الأستاذ: نايف المطيري
بصفته: مدير الإدارة (ويُشار إليه بـ "الطرف الأول")

الطرف الثاني:
${name} (ويُشار إليه بـ "الطرف الثاني")

التمهيد:
حيثُ أن الطرف الأول وساطة عقارية مرخصة بالوساطة العقارية وشراء وبيع العقارات، وتقوم بخدمة عملائها بتوفير العقار المناسب بناء على طلبهم، وتيسير حصولهم على تمويل مالي يمكنهم من تملّك العقار، وذلك بأي من برامج المرابحة أو الإجارة المنتهية بالتمليك المعتمدة من الهيئات الشرعية لدى البنوك والجهات التمويلية، ولخبرة الطرف الاول فقد اوكل الطرف الثاني هذي المهمة.
ولما كان الطرف الثاني يرغب في تملّك العقار حدده الطرف الثاني، فقد قام الطرف الأول بتسهيل كل ما من شأنه حصول الطرف الثاني على العقار المطلوب، وذلك بعمل جميع الإجراءات والمفاوضات مع مالك العقار، والجهات الممولة ومعرفة عروضها والحلول الممكنة لإنجاز الطرف الثاني، والجهات المقيمة للعقار لسرعة التقييم .

وعليه فقد اتفق الطرفان – بكامل الأهلية الشرعية والنظامية – على ما يلي:

1. يعتبر التمهيد المذكور أعلاه جزء لا يتجزأ من هذا العقد ويُقرأ معه ويفسّر كوحدة واحدة.
2. يقوم الطرف الأول بإتمام جميع الإجراءات والمفاوضات المتعلقة بالعقار المحدد من قبل الطرف الثاني، لإتمام الصفقة لصالح الطرف الثاني من الجهة التمويلية المعتمدة لدى الطرف الأول.
3. يلتزم الطرف الثاني بدفع مبلغ قدره نسبة2.5% قيمة العقار+500﷼ رسوم عقد ريال للطرف الأول، مقابل قيام الطرف الأول بالوفاء بجميع التزاماته.
4. في حال عدم إتمام الصفقة لسبب لا يعود للطرف الثاني، مثل رجوع مالك العقار عن البيع، أو ظهور عيوب في العقار، أو عدم موافقة البنك، فإن الطرف الأول يلتزم بإعادة المبلغ المدفوع للطرف الثاني اذا كان مدفوع مقدما بسند قبض او بيصال من البنك.
5. في حال رجوع الطرف الثاني عن إبرام الصفقة لأي سبب يعود له، فإن المبلغ المدفوع للطرف الأول يُعد مستحقًا ويُطالب الطرف الثاني بالوفاء به كاملًا.
6. في حال مماطلة الطرف الثاني أو تأخره عن الحضور أو التوقيع، مما يُضِر بالمالك ويجعله يبيع العقار لطرف آخر او يتغير عرض الجهة الممولة، فإن المبلغ المدفوع للطرف الأول يُعد من حقه، لأن عدم إتمام الصفقة جاء بسبب الطرف الثاني.
7. يلتزم الطرف الثاني بعدم إخفاء أي معلومات يعلم أنها تُعيق المعاملة، مثل وجود التزامات أو مشاكل على العقار، أو وجود متعثرات او  إيقافات او اللتزمات لم يذكرها وموجودة في (سمة)، أو تقديم طلب تمويل سابق مرفوض.
8. يلتزم الطرف الثاني بتحويل راتبه إلى البنك المحدد لاحقًا إن دعت الحاجة لذلك.
9. بعد موافقة المالك والبنك وإتمام البيع، تنتهي علاقة الطرف الثاني بالطرف الأول، وتصبح العلاقة مباشرة مع الجهة التمويلية.
10. العناوين المدونة في صدر هذا العقد تُعد معتمدة للمراسلات والإشعارات بين الطرفين.
11. في حال حدوث نزاع – لا سمح الله – ولم يتم حله وديًا خلال 10 أيام، يُحال إلى المحكمة المختصة بمدينة الرياض.
12. حُرر هذا العقد من نسختين أصليتين، بيد كل طرف نسخة للعمل بموجبها، وقد تفاهم الطرفان على حسن التعامل، وإعطاء كل ذي حق حقه.

تمت الموافقة من الطرف الأول بتاريخ ${arabicDate} الساعة ${time}
`;

  document.getElementById("contractContent").innerText = text;

  // تحديث الفوتر أيضاً
  document.getElementById("footerDate").innerText = `التاريخ والوقت الحالي: ${arabicDate} - ${time}`;
}

function verifyAndFinish() {
  const id = document.getElementById('confirmId').value;
  const word = document.getElementById('confirmWord').value.trim();
  const realId = document.getElementById('nationalId').value;

  if (id === realId && word === "موافق") {
    goToPage('successPage');
  } else {
    alert("التحقق فشل. تأكد من إدخال رقم الهوية الصحيح وكلمة 'موافق'");
  }
}
</script>

</body>
</html>