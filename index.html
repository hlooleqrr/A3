<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>عقد التمويل العقاري</title>
  <style>
    body { font-family: 'Arial', sans-serif; margin: 0; padding: 20px; background: #f4f4f4; direction: rtl; }
    .section { display: none; max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    .section.active { display: block; }
    h1, h2 { color: #004d40; text-align: center; }
    label { display: block; margin-top: 10px; }
    input { width: 100%; padding: 10px; margin-top: 5px; font-size: 16px; }
    button { padding: 10px 20px; margin-top: 20px; font-size: 16px; cursor: pointer; }
    .success { color: green; font-weight: bold; font-size: 18px; text-align: center; }
  </style>
</head>
<body>

<!-- صفحة 1 -->
<div id="page1" class="section active">
  <h1>نبدأ بسم الله</h1>
  <div style="text-align:center;">
    <button onclick="goToPage(2)">التالي</button>
  </div>
</div>

<!-- صفحة 2 -->
<div id="page2" class="section">
  <h2>معلومات العميل</h2>
  <label>الاسم الثلاثي:</label>
  <input type="text" id="clientName" placeholder="مثال: محمد أحمد الغامدي">
  <label>رقم السجل المدني:</label>
  <input type="text" id="clientId" maxlength="10" placeholder="مثال: 1234567890">
  <div style="text-align:center;">
    <button onclick="goToPage(3)">التالي</button>
  </div>
</div>

<!-- صفحة 3: العقد -->
<div id="page3" class="section">
  <h2>عقد اتفاق إنهاء إجراءات تمويل عقاري</h2>
  <div id="contractContent" style="line-height:2;"></div>
  <div style="text-align:center;">
    <button onclick="goToPage(4)">✅ أوافق على بنود العقد</button>
    <button onclick="alert('تم رفض العقد')">❌ أرفض</button>
  </div>
</div>

<!-- صفحة 4: تأكيد الموافقة -->
<div id="page4" class="section">
  <h2>تأكيد الموافقة على العقد</h2>
  <label>أعد إدخال رقم السجل المدني:</label>
  <input type="text" id="confirmId">
  <label>اكتب كلمة "موافقة":</label>
  <input type="text" id="confirmWord">
  <div style="text-align:center;">
    <button onclick="verifyApproval()">تأكيد</button>
  </div>
  <p id="approvalResult" class="success" style="display:none;">تم إبرام العقد بنجاح ✅</p>
</div>

<script>
  const clientTime = "2025/07/12 - 01:15:00";
  const companyTime = "2025/07/12 - 00:59:00";

  function goToPage(pageNum) {
    document.querySelectorAll('.section').forEach(div => div.classList.remove('active'));
    document.getElementById("page" + pageNum).classList.add('active');

    if (pageNum === 3) loadContract();
  }

  function loadContract() {
    const name = document.getElementById("clientName").value.trim();
    const id = document.getElementById("clientId").value.trim();

    const html = `
      <p style="text-align:center;">بسم الله الرحمن الرحيم</p>
      <p style="text-align:center;">
        المملكة العربية السعودية<br>
        الوساطة العقارية والتسويق<br>
        ترخيص رقم (1100042624)
      </p>

      <p>تم بعون الله وتوفيقه الاتفاق بين كل من:</p>
      <p><strong>الطرف الأول:</strong> شركة الوساطة العقارية والتسويق، ويمثلها الأستاذ نايف المطيري، بمدينة الرياض، وقد تم التوقيع بتاريخ <strong>${companyTime}</strong></p>
      <p><strong>الطرف الثاني:</strong> ${name}، رقم السجل المدني: ${id}، وتم التوقيع بتاريخ <strong>${clientTime}</strong></p>

      <h3>تمهيد:</h3>
      <p>يرغب الطرف الثاني في إنهاء إجراءات تمويل عقاري، وقد وافق الطرف الأول على تقديم خدمات الوساطة العقارية.</p>

      <h3>بنود العقد:</h3>
      <ol>
        <li>العمولة 2.5٪ من قيمة العقار أو 5000 ريال كحد أقصى.</li>
        <li>عدم التعامل المباشر مع المعلن دون علم الطرف الأول.</li>
        <li>دفع رسوم 500 ريال في حال انسحاب العميل بعد رفع الطلب.</li>
        <li>يُقر العميل بصحة البيانات وسلامة العقار.</li>
        <li>لا يتحمل الطرف الأول أي نزاع مع المعلن أو الجهة التمويلية.</li>
        <li>تحال النزاعات إلى المحكمة المختصة بمدينة الرياض.</li>
      </ol>

      <p><strong>تم التوقيع من قبل ممثل الشركة قبل عرض هذا العقد بـ 16 دقيقة.</strong></p>

      <p style="text-align:center; font-weight:bold;">هذا العقد يُعد سندًا تنفيذيًا كما نصت عليه المادة (9) من نظام التعاملات الإلكترونية.</p>
    `;

    document.getElementById("contractContent").innerHTML = html;
  }

  function verifyApproval() {
    const originalId = document.getElementById("clientId").value.trim();
    const enteredId = document.getElementById("confirmId").value.trim();
    const word = document.getElementById("confirmWord").value.trim();

    if (originalId === enteredId && word === "موافقة") {
      document.getElementById("approvalResult").style.display = "block";
    } else {
      alert("يرجى التأكد من إدخال رقم السجل الصحيح وكتابة كلمة (موافقة) بشكل صحيح.");
    }
  }
</script>

</body>
</html>