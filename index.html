<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>عقد تمويل عقاري</title>
  <style>
    body {
      margin: 0;
      font-family: 'Tajawal', sans-serif;
      background: #f5f5f5;
      color: #222;
    }
    .page {
      display: none;
      padding: 30px 20px;
      min-height: 100vh;
      background: #fff;
      border: 2px solid #00a98f;
      border-radius: 12px;
      margin: 15px;
      box-sizing: border-box;
    }
    .show {
      display: block;
    }
    h1, h2 {
      text-align: center;
      color: #004d40;
    }
    h2 {
      color: #00a98f;
      font-size: 22px;
    }
    .btn {
      background: #00a98f;
      color: #fff;
      border: none;
      padding: 12px 30px;
      font-size: 18px;
      border-radius: 8px;
      display: block;
      margin: 25px auto 0;
      cursor: pointer;
    }
    input {
      width: 100%;
      padding: 12px;
      font-size: 17px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .contract {
      white-space: pre-line;
      background: #f9f9f9;
      padding: 20px;
      border: 1px dashed #00a98f;
      border-radius: 8px;
      line-height: 2;
      font-size: 16px;
    }
    .alert {
      color: red;
      font-weight: bold;
      text-align: center;
      margin-bottom: 10px;
    }
    footer {
      text-align: center;
      font-size: 14px;
      color: #666;
      margin-top: 40px;
      padding: 20px;
    }
  </style>
</head>
<body>

<div class="page show" id="page1">
  <div class="alert">⚠️ هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية.</div>
  <h1>سرعة تملك العقار والحلول التمويلية المتكاملة</h1>
  <h2>نرحب بك عميلنا العزيز</h2>
  <p style="text-align:center;font-size:20px;">نبرم معك هذا العقد</p>
  <p style="text-align:center;font-size:22px;color:#004d40;">ابدأ بسم الله</p>
  <button class="btn" onclick="goToPage(2)">ابدأ</button>
</div>

<div class="page" id="page2">
  <div class="alert">⚠️ هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية.</div>
  <h2>فضلاً أدخل بياناتك</h2>
  <input type="text" id="fullName" placeholder="الاسم الكريم" />
  <input type="text" id="nationalId" placeholder="السجل المدني" />
  <button class="btn" onclick="goToPage(3)">التالي</button>
</div>

<div class="page" id="page3">
  <div class="alert">⚠️ هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية.</div>
  <div class="contract" id="contractContent"></div>
  <div style="text-align:center;">
    <button class="btn" onclick="goToPage(4)">أوافق</button>
    <button class="btn" onclick="goToPage('reject')">لا أوافق</button>
  </div>
</div><div class="page" id="page4">
  <div class="alert">⚠️ هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية.</div>
  <h2>لتأكيد العقد</h2>
  <input type="text" id="confirmId" placeholder="رقم الهوية" />
  <input type="text" id="confirmWord" placeholder='اكتب كلمة "موافق"' />
  <button class="btn" onclick="verifyAndFinish()">تأكيد</button>
</div>

<div class="page" id="successPage">
  <div class="alert">⚠️ هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية.</div>
  <h2 style="text-align:center; color: green;">✅ تمت الموافقة على العقد بنجاح</h2>
  <p id="successText" style="text-align:center; font-size: 18px;"></p>
</div>

<div class="page" id="reject">
  <div class="alert">⚠️ هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية.</div>
  <h2 style="text-align:center; color: red;">❌ تم رفض العقد</h2>
  <p style="text-align:center;">نأمل التواصل مع الممثل القانوني لمتابعة الإجراءات، وشكرًا لك.</p>
</div>

<footer id="footerDate"></footer>

<script>
function goToPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('show'));
  document.getElementById("page" + id)?.classList.add('show');
  if (id === 3) generateContract();
  updateFooterTime();
}

function generateContract() {
  const name = document.getElementById('fullName').value || '________';
  const nationalId = document.getElementById('nationalId').value || '________';
  const now = new Date(Date.now() - 21 * 60 * 1000); // قبل 21 دقيقة
  const date = now.toLocaleDateString('ar-EG', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
  const time = now.toLocaleTimeString('ar-EG');
  const content = `
بسم الله الرحمن الرحيم

المملكة العربية السعودية
الوساطة العقارية والتسويق
ترخيص: 1100042624
الرياض

عقد اتفاقية إنهاء إجراءات تمويل عقاري من جهة تمويلية

تم بعون الله وتوفيقه في يوم ${date}، الساعة ${time}، الاتفاق بين كلٍ من:

الطرف الأول:
شركة الوساطة العقارية والتسويق
ويمثلها في التوقيع على هذا العقد الأستاذ: نايف المطيري
بصفته: مدير الادراة
ويُشار إليه في هذا العقد بـ (الطرف الأول)

الطرف الثاني:
الاسم: ${name}
رقم الهوية: ${nationalId}
ويُشار إليه في هذا العقد بـ (الطرف الثاني)

التمهيد:
حيثُ أن الطرف الأول وساطة عقارية مرخصة بالوساطة العقارية وشراء وبيع العقارات، وتقوم بخدمة عملائها بتوفير العقار المناسب بناء على طلبهم، وتيسير حصولهم على تمويل مالي يمكنهم من تملّك العقار، وذلك بأي من برامج المرابحة أو الإجارة المنتهية بالتمليك المعتمدة من الهيئات الشرعية لدى البنوك والجهات التمويلية، ولخبرة الطرف الاول فقد اوكل الطرف الثاني هذي المهمة.
ولما كان الطرف الثاني يرغب في تملّك العقار حدده الطرف الثاني، فقد قام الطرف الأول بتسهيل كل ما من شأنه حصول الطرف الثاني على العقار المطلوب، وذلك بعمل جميع الإجراءات والمفاوضات مع مالك العقار، والجهات الممولة ومعرفة عروضها والحلول الممكنة لإنجاز الطرف الثاني، والجهات المقيمة للعقار لسرعة التقييم .

وعليه فقد اتفق الطرفان – بكامل الأهلية الشرعية والنظامية – على ما يلي:

1. يعتبر التمهيد المذكور أعلاه جزء لا يتجزأ من هذا العقد ويُقرأ معه ويفسّر كوحدة واحدة.
2. يقوم الطرف الأول بإتمام جميع الإجراءات والمفاوضات المتعلقة بالعقار المحدد من قبل الطرف الثاني، لإتمام الصفقة لصالح الطرف الثاني من الجهة التمويلية المعتمدة لدى الطرف الأول.
3. يلتزم الطرف الثاني بدفع مبلغ قدره نسبة2.5% قيمة العقار+500﷼ رسوم عقد ريال للطرف الأول، مقابل قيام الطرف الأول بالوفاء بجميع التزاماته.
4. في حال عدم إتمام الصفقة لسبب لا يعود للطرف الثاني، مثل رجوع مالك العقار عن البيع، أو ظهور عيوب في العقار، أو عدم موافقة البنك، فإن الطرف الأول يلتزم بإعادة المبلغ المدفوع للطرف الثاني اذا كان مدفوع مقدما بسند قبض او بيصال من البنك.
5. في حال رجوع الطرف الثاني عن إبرام الصفقة لأي سبب يعود له، فإن المبلغ المدفوع للطرف الأول يُعد مستحقًا ويُطالب الطرف الثاني بالوفاء به كاملًا.
6. في حال مماطلة الطرف الثاني أو تأخره عن الحضور أو التوقيع، مما يُضِر بالمالك ويجعله يبيع العقار لطرف آخر او يتغير عرض الجهة الممولة، فإن المبلغ المدفوع للطرف الأول يُعد من حقه، لأن عدم إتمام الصفقة جاء بسبب الطرف الثاني.
7. يلتزم الطرف الثاني بعدم إخفاء أي معلومات يعلم أنها تُعيق المعاملة، مثل وجود التزامات أو مشاكل على العقار، أو وجود متعثرات او  إيقافات او اللتزمات لم يذكرها وموجودة في (سمة)، أو تقديم طلب تمويل سابق مرفوض.
8. يلتزم الطرف الثاني بتحويل راتبه إلى البنك المحدد لاحقًا إن دعت الحاجة لذلك.
9. بعد موافقة المالك والبنك وإتمام البيع، تنتهي علاقة الطرف الثاني بالطرف الأول، وتصبح العلاقة مباشرة مع الجهة التمويلية.
10. العناوين المدونة في صدر هذا العقد تُعد معتمدة للمراسلات والإشعارات بين الطرفين.
11. في حال حدوث نزاع – لا سمح الله – ولم يتم حله وديًا خلال 10 أيام، يُحال إلى المحكمة المختصة بمدينة الرياض.
12. حُرر هذا العقد من نسختين أصليتين، بيد كل طرف نسخة للعمل بموجبها، وقد تفاهم الطرفان على حسن التعامل، وإعطاء كل ذي حق حقه.

تمت الموافقة من الطرف الأول بتاريخ ${date}، الساعة ${time}
هل توافق على هذا العقد؟
  `;
  document.getElementById("contractContent").innerText = content;
}

function updateFooterTime() {
  const now = new Date();
  const date = now.toLocaleDateString('ar-EG', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });
  const time = now.toLocaleTimeString('ar-EG');
  document.getElementById("footerDate").innerHTML =
    `التاريخ والوقت الحالي: ${date} - ${time}<br><strong style="color:red">⚠️ هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية.</strong>`;
}

function verifyAndFinish() {
  const confirmId = document.getElementById('confirmId').value.trim();
  const originalId = document.getElementById('nationalId').value.trim();
  const word = document.getElementById('confirmWord').value.trim();
  const name = document.getElementById('fullName').value.trim();

  if (confirmId !== originalId) {
    alert("رقم الهوية لا يطابق الرقم المدخل سابقًا.");
    return;
  }
  if (word !== "موافق") {
    alert("يرجى كتابة كلمة 'موافق' لتأكيد العقد.");
    return;
  }

  const now = new Date();
  const date = now.toLocaleDateString('ar-EG', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });
  const time = now.toLocaleTimeString('ar-EG');

  document.getElementById("successText").innerText =
    `مرحباً بك يا ${name}\nبتاريخ ${date}، الساعة ${time}`;
  goToPage('successPage');
}
</script>

</body>
</html>