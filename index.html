<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>عقد إنهاء إجراءات تمويل عقاري</title>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
      color: #000;
    }
    .page {
      padding: 30px;
      min-height: 100vh;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border: 1px solid #ccc;
      background: #fff;
    }
    h1 {
      text-align: center;
      color: #004d40;
      font-size: 32px;
    }
    h2 {
      text-align: center;
      color: #00796b;
      font-size: 24px;
      margin-bottom: 10px;
    }
    .highlight {
      color: red;
      font-weight: bold;
      text-align: center;
      margin-bottom: 20px;
    }
    .section {
      margin-bottom: 20px;
      font-size: 18px;
    }
    .footer {
      margin-top: 40px;
      font-size: 14px;
      color: #555;
      border-top: 1px solid #ccc;
      padding-top: 10px;
      text-align: center;
    }
    .contract-box {
      border: 1px solid #000;
      padding: 20px;
      background-color: #fefefe;
    }
    label {
      display: block;
      margin-top: 20px;
    }
    input {
      width: 100%;
      padding: 10px;
      font-size: 18px;
      margin-top: 5px;
    }
    button {
      padding: 12px 24px;
      font-size: 18px;
      background-color: #00796b;
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 30px;
    }
    button:hover {
      background-color: #004d40;
    }
  </style>
</head>
<body>
  <div class="page" id="start">
    <h1>سرعة تملك العقار والحلول التمويلية المتكاملة</h1>
    <h2>نرحب بك عميلنا العزيز</h2>
    <div class="highlight">تنبيه: هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية</div>
    <div style="text-align:center; font-size: 20px;">نبرم معك هذا العقد</div>
    <div style="text-align:center; font-size: 24px; margin: 20px 0;">بسم الله الرحمن الرحيم</div>
    <div style="text-align:center;">
      <button onclick="goToStep('step2')">ابدأ</button>
    </div>
    <div class="footer" id="footerTime1"></div>
  </div>

  <div class="page" id="step2" style="display:none;">
    <div class="highlight">تنبيه: هذا العقد يُعد سندًا تنفيذيًا</div>
    <label>الاسم الكريم:</label>
    <input type="text" id="clientName" required>
    <label>رقم السجل المدني:</label>
    <input type="text" id="nationalId" required>
    <div style="text-align:center;">
      <button onclick="goToContract()">التالي</button>
    </div>
    <div class="footer" id="footerTime2"></div>
  </div>

  <div class="page" id="contractPage" style="display:none;">
    <div class="highlight">تنبيه: هذا العقد يُعد سندًا تنفيذيًا</div>
    <div class="contract-box" id="contractContent"></div>
    <div style="text-align:center;">
      <button onclick="goToConfirm()">هل توافق؟</button>
    </div>
    <div class="footer" id="footerTime3"></div>
  </div>

  <div class="page" id="confirmPage" style="display:none;">
    <h2>تأكيد الموافقة</h2>
    <p>يرجى تأكيد هويتك:</p>
    <label>رقم الهوية:</label>
    <input type="text" id="confirmId">
    <label>اكتب: موافق</label>
    <input type="text" id="confirmWord">
    <div style="text-align:center;">
      <button onclick="finalize()">تأكيد</button>
    </div>
    <div class="footer" id="footerTime4"></div>
  </div>

  <div class="page" id="finalPage" style="display:none;">
    <div class="highlight" id="finalMessage"></div>
    <div class="footer" id="footerTime5"></div>
  </div>

<script>
function getNow() {
  const now = new Date();
  return now.toLocaleString('ar-EG');
}

function goToStep(id) {
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  document.getElementById(id).style.display = 'block';
  document.getElementById('footerTime2').innerText = 'التاريخ والوقت الآن: ' + getNow();
}

function goToContract() {
  const name = document.getElementById('clientName').value;
  const id = document.getElementById('nationalId').value;
  if (!name || !id) {
    alert("يرجى إدخال الاسم والسجل المدني");
    return;
  }
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  document.getElementById('contractPage').style.display = 'block';
  document.getElementById('footerTime3').innerText = 'التاريخ والوقت الآن: ' + getNow();
  
  const approvalDate = new Date(Date.now() - 21 * 60000).toLocaleString('ar-EG');
  document.getElementById('contractContent').innerHTML = `
    <p>شركة الوساطة العقارية والتسويق، ويمثلها نايف المطيري (مدير الإدارة)، ويُشار إليه بـ (الطرف الأول)</p>
    <p>الطرف الثاني: ${name}، رقم الهوية: ${id}</p>
    <p>تمت الموافقة من الطرف الأول بتاريخ: ${approvalDate}</p>
    <hr>
    <p><strong>البنود:</strong></p>
    <ol>
      <li>التمهيد جزء لا يتجزأ من هذا العقد.</li>
      <li>يقوم الطرف الأول بإتمام الإجراءات التمويلية.</li>
      <li>يدفع الطرف الثاني 2.5٪ من قيمة العقار + 500 ريال.</li>
      <li>إذا لم تتم الصفقة لأسباب لا تعود للطرف الثاني، يُعاد المبلغ.</li>
      <li>إذا انسحب الطرف الثاني، المبلغ مستحق للطرف الأول.</li>
      <li>إذا تأخر الطرف الثاني وأثر على الصفقة، يُحتفظ بالمبلغ.</li>
      <li>يلتزم الطرف الثاني بكشف جميع المعلومات.</li>
      <li>يلتزم بتحويل الراتب إذا طُلب ذلك.</li>
      <li>تنتهي العلاقة بعد توقيع العقد مع الجهة التمويلية.</li>
      <li>العناوين المعتمدة للمراسلات.</li>
      <li>النزاعات تُحال لمحكمة الرياض بعد 10 أيام.</li>
      <li>حرر من نسختين... مع حسن التعامل.</li>
    </ol>`;
}

function goToConfirm() {
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  document.getElementById('confirmPage').style.display = 'block';
  document.getElementById('footerTime4').innerText = 'التاريخ والوقت الآن: ' + getNow();
}

function finalize() {
  const name = document.getElementById('clientName').value;
  const id = document.getElementById('nationalId').value;
  const confirmId = document.getElementById('confirmId').value;
  const confirmWord = document.getElementById('confirmWord').value;

  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  document.getElementById('finalPage').style.display = 'block';
  document.getElementById('footerTime5').innerText = 'التاريخ والوقت الآن: ' + getNow();

  if (confirmId === id && confirmWord === 'موافق') {
    document.getElementById('finalMessage').innerHTML = `تم يا ${name} إبرام العقد بنجاح ✅`;
  } else {
    document.getElementById('finalMessage').innerHTML = `تم رفض العقد رسميًا من ${name}، رقم الهوية ${id}. يرجى التواصل مع الممثل القانوني.`;
  }
}

document.getElementById('footerTime1').innerText = 'التاريخ والوقت الآن: ' + getNow();
</script>
</body>
</html>